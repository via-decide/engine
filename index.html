
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Decide Food ‚Äî Rajkot</title>
<meta name="description" content="Smart food ordering in Rajkot. Pay after delivery. Zero commission.">
<meta name="theme-color" content="#ff671f"/>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
:root{
 --brand:#ff671f;
 --bg:#000;
 --card:#141414;
 --border:rgba(255,255,255,.15);
 --muted:#aaa;
 --success:#00e676;
}

*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto}
button{cursor:pointer;border:none;font:inherit}
input,select,textarea{font:inherit}

.header{
 position:sticky;top:0;
 background:#0a0a0a;
 border-bottom:1px solid var(--border);
 padding:14px 18px;
 display:flex;
 justify-content:space-between;
 align-items:center;
 z-index:100;
}

.brand{
 font-weight:900;
 letter-spacing:1px;
 color:var(--brand);
 display:flex;
 align-items:center;
 gap:8px;
}

.dot{
 width:8px;height:8px;border-radius:50%;
 background:var(--success);
 box-shadow:0 0 10px var(--success);
}

.container{max-width:900px;margin:auto;padding:20px}

.card{
 background:var(--card);
 border:1px solid var(--border);
 border-radius:18px;
 padding:18px;
 margin-bottom:16px;
}

h1{font-size:1.8rem;margin-bottom:10px}
h2{font-size:1.2rem;margin-bottom:8px}
p{color:var(--muted);line-height:1.6}

.btn{
 padding:10px 14px;
 border-radius:999px;
 font-weight:700;
 background:var(--brand);
 color:#000;
}

.choice{
 padding:8px 14px;
 border-radius:999px;
 border:1px solid var(--border);
 background:#111;
 margin:4px;
}
.choice.active{
 background:var(--brand);
 color:#000;
}

.restaurant{
 padding:14px;
 border:1px solid var(--border);
 border-radius:16px;
 margin-top:10px;
}

.menu-item{
 display:flex;
 justify-content:space-between;
 align-items:center;
 padding:10px 0;
 border-bottom:1px solid var(--border);
}

.qty{
 display:flex;
 gap:6px;
 align-items:center;
}

.qty button{
 padding:4px 8px;
 background:#222;
 color:#fff;
 border-radius:6px;
}

.cart{
 position:fixed;
 bottom:20px;
 right:20px;
 background:var(--brand);
 color:#000;
 padding:12px 18px;
 border-radius:999px;
 font-weight:800;
}

input,textarea,select{
 width:100%;
 padding:10px;
 border-radius:10px;
 border:1px solid var(--border);
 background:#111;
 color:#fff;
 margin-bottom:10px;
}

.dashboard{
 background:#111;
 border:1px solid var(--border);
 padding:14px;
 border-radius:12px;
 margin-top:20px;
 font-size:.9rem;
}

.footer{
 margin-top:40px;
 border-top:1px solid var(--border);
 padding-top:14px;
 color:#666;
 font-size:.85rem;
 text-align:center;
}
</style>
</head>

<body>

<div class="header">
 <div class="brand">
  DECIDE FOOD
  <span class="dot"></span>
  <span style="color:#aaa;font-size:.8rem">Rajkot ‚Ä¢ Riders Active</span>
 </div>
 <div>
  <button onclick="goHome()" class="btn">Home</button>
  <button onclick="openDashboard()" class="btn" style="margin-left:8px">Admin</button>
 </div>
</div>

<div class="container" id="app"></div>

<div id="cartBtn" class="cart" onclick="openCart()" style="display:none">
 Cart (<span id="cartCount">0</span>)
</div>

<script>

const DELIVERY_FEE = 25;
const UPI_ID = "6351537770@yapl";
const UPI_NAME = "Dharam Daxini";

let ANALYTICS = [];
let ORDERS = [];

const RESTAURANTS = [
{
 id:"r1",
 name:"Unlimited Gujarati Thali",
 area:"Race Course Road",
 rating:4.8,
 prep:18,
 taste:["mild","light"],
 menu:[
  {id:"m1",name:"Gujarati Thali",price:150,taste:["mild","light"]},
  {id:"m2",name:"Pav Bhaji",price:120,taste:["spicy"]},
  {id:"m3",name:"Chaas",price:25,taste:["light"]}
 ]
},
{
 id:"r2",
 name:"Spice Junction",
 area:"Kalawad Road",
 rating:4.6,
 prep:22,
 taste:["spicy"],
 menu:[
  {id:"p1",name:"Paneer Tikka",price:190,taste:["spicy"]},
  {id:"p2",name:"Dal Tadka",price:120,taste:["mild"]},
  {id:"p3",name:"Jeera Rice",price:90,taste:["light"]}
 ]
}
];

let STATE = {
 view:"home",
 area:"",
 urgency:"",
 taste:"",
 restaurant:null,
 cart:[]
};

function track(event,data){
 ANALYTICS.push({event,data,time:new Date()});
}

function goHome(){
 STATE.view="home";
 render();
}

function scoreRestaurant(r){
 let score = 0;

 if(STATE.area && r.area===STATE.area) score+=20;
 if(STATE.urgency==="fast") score+= (30 - r.prep);
 if(STATE.taste && r.taste.includes(STATE.taste)) score+=15;
 score+= r.rating * 5;

 return score;
}

function render(){

 if(STATE.view==="home"){
 document.getElementById("app").innerHTML=`
  <div class="card">
   <h1>Smarter Food Ordering</h1>
   <p>Select area ‚Üí urgency ‚Üí taste. Pay after delivery.</p>
   <button class="btn" onclick="start()">Start Ordering</button>
  </div>
 `;
 }

 if(STATE.view==="discover"){
 document.getElementById("app").innerHTML=`
  <div class="card">
   <h2>Select Area</h2>
   <select onchange="STATE.area=this.value">
    <option value="">Choose area</option>
    <option>Race Course Road</option>
    <option>Kalawad Road</option>
   </select>

   <h2>Urgency</h2>
   <button class="choice" onclick="setUrgency('fast')">üöÄ Fast</button>
   <button class="choice" onclick="setUrgency('normal')">üïí Normal</button>

   <h2>Taste</h2>
   <button class="choice" onclick="setTaste('spicy')">üî• Spicy</button>
   <button class="choice" onclick="setTaste('mild')">üßà Mild</button>
   <button class="choice" onclick="setTaste('light')">ü•ó Light</button>

   <br/><br/>
   <button class="btn" onclick="showResults()">Show Restaurants</button>
  </div>
 `;
 }

 if(STATE.view==="results"){
 let list = RESTAURANTS
  .map(r=>({...r,score:scoreRestaurant(r)}))
  .sort((a,b)=>b.score-a.score);

 document.getElementById("app").innerHTML=`
  <div class="card">
   <h2>Optimized Restaurants</h2>
   ${list.map(r=>`
     <div class="restaurant">
       <b>${r.name}</b><br/>
       ‚≠ê ${r.rating} ‚Ä¢ ${r.prep} min prep<br/>
       Score: ${r.score}
       <br/><br/>
       <button class="btn" onclick="openRestaurant('${r.id}')">View Menu</button>
     </div>
   `).join("")}
  </div>
 `;
 }

 if(STATE.view==="restaurant"){
 let r = RESTAURANTS.find(x=>x.id===STATE.restaurant);
 document.getElementById("app").innerHTML=`
  <div class="card">
   <h2>${r.name}</h2>
   ${r.menu.map(item=>`
     <div class="menu-item">
       <div>
         ${item.name}<br/>
         ‚Çπ${item.price}
       </div>
       <div class="qty">
         <button onclick="updateQty('${item.id}',-1)">-</button>
         <span id="qty-${item.id}">0</span>
         <button onclick="updateQty('${item.id}',1)">+</button>
       </div>
     </div>
   `).join("")}
  </div>
 `;
 }

 if(STATE.view==="cart"){
 let subtotal = STATE.cart.reduce((s,i)=>s+i.price*i.qty,0);
 let total = subtotal + DELIVERY_FEE;

 document.getElementById("app").innerHTML=`
  <div class="card">
   <h2>Your Cart</h2>
   ${STATE.cart.map(i=>`
     ${i.name} x ${i.qty} = ‚Çπ${i.price*i.qty}<br/>
   `).join("")}
   <hr/>
   Subtotal: ‚Çπ${subtotal}<br/>
   Delivery: ‚Çπ${DELIVERY_FEE}<br/>
   <b>Total: ‚Çπ${total}</b>
   <br/><br/>
   <button class="btn" onclick="checkout()">Confirm Order</button>
  </div>
 `;
 }

 if(STATE.view==="checkout"){
 let subtotal = STATE.cart.reduce((s,i)=>s+i.price*i.qty,0);
 let total = subtotal + DELIVERY_FEE;
 let upiLink = `upi://pay?pa=${UPI_ID}&pn=${UPI_NAME}&am=${total}&cu=INR`;

 document.getElementById("app").innerHTML=`
  <div class="card">
   <h2>Delivery Details</h2>
   <input id="name" placeholder="Your name"/>
   <input id="phone" placeholder="Phone"/>
   <textarea id="address" placeholder="Full address"></textarea>

   <h2>UPI Payment (optional)</h2>
   <div id="qrcode"></div>

   <br/>
   <button class="btn" onclick="placeOrder(${total})">Place Order</button>
   <p style="margin-top:10px;color:#aaa">Pay after delivery or scan UPI.</p>
  </div>
 `;

 setTimeout(()=>{
   new QRCode(document.getElementById("qrcode"), upiLink);
 },100);
 }

 updateCartButton();
}

function start(){ STATE.view="discover"; render(); }
function setUrgency(v){ STATE.urgency=v; track("urgency",v); }
function setTaste(v){ STATE.taste=v; track("taste",v); }

function showResults(){
 STATE.view="results";
 render();
}

function openRestaurant(id){
 STATE.restaurant=id;
 STATE.view="restaurant";
 track("restaurant_view",id);
 render();
}

function updateQty(itemId,delta){
 let r = RESTAURANTS.find(x=>x.id===STATE.restaurant);
 let item = r.menu.find(x=>x.id===itemId);

 let existing = STATE.cart.find(x=>x.id===itemId);

 if(!existing && delta>0){
   STATE.cart.push({...item,qty:1});
 }
 else if(existing){
   existing.qty += delta;
   if(existing.qty<=0){
     STATE.cart = STATE.cart.filter(x=>x.id!==itemId);
   }
 }

 document.getElementById("qty-"+itemId).innerText =
  existing ? existing.qty : (delta>0?1:0);

 updateCartButton();
}

function openCart(){
 STATE.view="cart";
 render();
}

function checkout(){
 STATE.view="checkout";
 render();
}

function placeOrder(total){
 ORDERS.push({
  items:STATE.cart,
  total,
  time:new Date()
 });

 track("order_placed",total);

 alert("Order placed! We will call to confirm.");
 STATE.cart=[];
 STATE.view="home";
 render();
}

function updateCartButton(){
 document.getElementById("cartCount").innerText=
  STATE.cart.reduce((s,i)=>s+i.qty,0);
 document.getElementById("cartBtn").style.display =
  STATE.cart.length>0 ? "block" : "none";
}

function openDashboard(){
 document.getElementById("app").innerHTML=`
  <div class="card">
   <h2>Admin Dashboard</h2>
   Total Orders: ${ORDERS.length}<br/>
   Total Revenue: ‚Çπ${ORDERS.reduce((s,o)=>s+o.total,0)}<br/><br/>
   <div class="dashboard">
     <b>Analytics Events</b><br/>
     ${ANALYTICS.map(a=>a.event+" - "+JSON.stringify(a.data)).join("<br/>")}
   </div>
  </div>
 `;
}

render();

</script>
</body>
</html>

