<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Decide</title>
<meta name="theme-color" content="#ff671f">

<!-- Supabase (optional backend) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --brand-orange:#ff671f;
  --border:rgba(255,255,255,0.15);
  --accent:#00e676;
  --ondc-blue:#1e88e5;
  --font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{
  margin:0;padding:0;background:#000;color:#fff;
  font-family:var(--font);
}

#app{min-height:100vh;padding:20px}

.header{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:20px;
}
.header-badge{
  border:2px solid var(--brand-orange);
  padding:8px 14px;border-radius:10px;
  font-weight:800;color:var(--brand-orange);
}
.grid{
  display:grid;grid-template-columns:1fr 1fr;gap:15px;
}
.card{
  background:#111;border:1px solid var(--border);
  padding:20px;border-radius:20px;text-align:center;
  cursor:pointer;transition:.2s;
}
.card:hover{transform:translateY(-3px)}
.icon{font-size:2rem;margin-bottom:8px}
.tag{font-size:.7rem;color:#888}

.wrap{max-width:700px;margin:0 auto}
.h1{text-align:center;font-weight:900;margin:20px 0}
.action{
  background:var(--brand-orange);
  border:none;padding:12px;border-radius:12px;
  font-weight:900;width:100%;margin-top:10px;cursor:pointer;
}
.secondary{
  background:transparent;border:1px solid var(--border);
  color:#fff;padding:12px;border-radius:12px;
  font-weight:900;width:100%;margin-top:10px;cursor:pointer;
}
.result{
  background:#111;border:1px solid var(--border);
  padding:15px;border-radius:15px;margin-bottom:10px;
}
.toast{
  position:fixed;bottom:30px;left:50%;
  transform:translateX(-50%);
  background:#111;border:1px solid #333;
  padding:10px 20px;border-radius:30px;
  opacity:0;transition:.3s;
}
.toast.show{opacity:1}
textarea{
  width:100%;min-height:100px;
  background:#111;border:1px solid var(--border);
  color:#fff;padding:10px;border-radius:12px;
}
</style>
</head>

<body>
<div id="app"></div>
<div id="toast" class="toast"></div>

<script>
(function(){
"use strict";

function $(id){return document.getElementById(id);}
function toast(msg){
  var t=$("toast");
  t.textContent=msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),2000);
}
function safeId(){
  return "id-"+Math.random().toString(36).slice(2);
}

/* ========= STATE ========= */
var STATE={
  cart:[],
  orders:[],
  feedback:[]
};

/* ========= FEEDBACK STORAGE ========= */
function loadFeedback(){
  try{
    STATE.feedback=JSON.parse(localStorage.getItem("decide_feedback")||"[]");
  }catch(e){STATE.feedback=[];}
}
function saveFeedback(){
  localStorage.setItem("decide_feedback",JSON.stringify(STATE.feedback));
}

async function submitFeedback(feature,msg){
  if(!msg||msg.length<3){toast("Write something meaningful");return;}
  var entry={
    id:safeId(),
    feature:feature,
    message:msg,
    time:new Date().toISOString(),
    synced:false
  };
  STATE.feedback.push(entry);
  saveFeedback();
  toast("Idea shared üöÄ");
}

/* ========= UI ========= */

function renderLobby(){
  $("app").innerHTML=
  '<div class="header">'+
    '<div class="header-badge">DECIDE DEMO</div>'+
    '<button class="secondary" onclick="renderFeedbackCenter()">Feedback</button>'+
  '</div>'+

  '<div class="grid">'+

    '<div class="card" onclick="renderDining()">'+
      '<div class="icon">üçΩÔ∏è</div>'+
      '<div>Dining</div>'+
      '<div class="tag">Rajkot MVP</div>'+
    '</div>'+

    '<div class="card" onclick="renderElectronics()">'+
      '<div class="icon">üì±</div>'+
      '<div>Electronics</div>'+
      '<div class="tag">Demo Data</div>'+
    '</div>'+

    '<div class="card" onclick="renderComingSoon(\'Insurance\')">'+
      '<div class="icon">üõ°Ô∏è</div>'+
      '<div>Insurance</div>'+
      '<div class="tag">Coming Soon</div>'+
    '</div>'+

    '<div class="card" onclick="renderComingSoon(\'Health\')">'+
      '<div class="icon">üè•</div>'+
      '<div>Health</div>'+
      '<div class="tag">Coming Soon</div>'+
    '</div>'+

  '</div>';
}

/* ========= DINING ========= */
function renderDining(){
  $("app").innerHTML=
  '<div class="wrap">'+
    '<div class="h1">Dining - Rajkot</div>'+
    '<div class="result">Unlimited Gujarati Thali - ‚Çπ150</div>'+
    '<button class="action" onclick="addToCart(\'Thali\',150)">Add to Cart</button>'+
    '<button class="secondary" onclick="renderLobby()">Back</button>'+
  '</div>';
}

/* ========= ELECTRONICS ========= */
function renderElectronics(){
  $("app").innerHTML=
  '<div class="wrap">'+
    '<div class="h1">Electronics</div>'+
    '<div class="result">iPhone 15 Pro - ‚Çπ134900</div>'+
    '<button class="action" onclick="addToCart(\'iPhone\',134900)">Add to Cart</button>'+
    '<button class="secondary" onclick="renderLobby()">Back</button>'+
  '</div>';
}

/* ========= CART ========= */
function addToCart(name,price){
  STATE.cart.push({name,price});
  toast("Added to cart");
}

/* ========= COMING SOON ========= */
function renderComingSoon(feature){
  $("app").innerHTML=
  '<div class="wrap">'+
    '<div class="h1">COMING SOON - '+feature+'</div>'+
    '<textarea id="ideaBox" placeholder="Share your idea..."></textarea>'+
    '<button class="action" onclick="submitFeedback(\''+feature+'\',document.getElementById(\'ideaBox\').value)">Share Idea</button>'+
    '<button class="secondary" onclick="renderLobby()">Back</button>'+
  '</div>';
}

/* ========= FEEDBACK CENTER ========= */
function renderFeedbackCenter(){
  loadFeedback();
  var list=STATE.feedback.map(f=>
    '<div class="result">'+
    '<strong>'+f.feature+'</strong><br>'+
    f.message+'<br>'+
    '<small>'+new Date(f.time).toLocaleString()+'</small>'+
    '</div>'
  ).join("");

  $("app").innerHTML=
  '<div class="wrap">'+
    '<div class="h1">Feedback Center</div>'+
    (list||'<div>No feedback yet</div>')+
    '<button class="secondary" onclick="renderLobby()">Back</button>'+
  '</div>';
}

/* ========= INIT ========= */
window.renderLobby=renderLobby;
window.renderDining=renderDining;
window.renderElectronics=renderElectronics;
window.renderComingSoon=renderComingSoon;
window.renderFeedbackCenter=renderFeedbackCenter;
window.submitFeedback=submitFeedback;
window.addToCart=addToCart;

renderLobby();

})();
</script>
</body>
</html>
